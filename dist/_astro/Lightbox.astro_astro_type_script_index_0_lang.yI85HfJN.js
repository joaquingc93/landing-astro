function y(){console.log("ðŸŽ¯ Lightbox: Initializing...");const t=document.getElementById("lightbox-modal"),m=document.getElementById("lightbox-image"),p=document.getElementById("lightbox-title"),v=document.getElementById("lightbox-counter"),f=document.getElementById("lightbox-close"),d=document.getElementById("lightbox-prev"),h=document.getElementById("lightbox-next");console.log("ðŸŽ¯ Lightbox: Modal element found:",!!t);let i=0,l=[];const L=document.querySelectorAll(".gallery-image-trigger, .project-image, .gallery-trigger");console.log("ðŸŽ¯ Lightbox: Found gallery triggers:",L.length),l=[],L.forEach((e,s)=>{const o=e;if(e.classList.contains("gallery-trigger")){let n=function(k){k.preventDefault(),k.stopPropagation(),console.log("ðŸŽ¯ Lightbox: Project gallery clicked for project:",a),E(a)};const a=o.dataset.projectId;e.removeEventListener("click",n),e.addEventListener("click",n),o.style.cursor="pointer";return}const c={url:o.dataset.imageUrl||e.querySelector("img")?.src||"",alt:o.dataset.imageAlt||e.querySelector("img")?.alt||"",title:o.dataset.imageTitle||o.dataset.projectTitle||`Image ${s+1}`,index:s};console.log("ðŸŽ¯ Lightbox: Adding image:",c.title,c.url),l.push(c),e.removeEventListener("click",r);function r(n){n.preventDefault(),n.stopPropagation(),console.log("ðŸŽ¯ Lightbox: Image clicked, opening at index:",s),j(s)}e.addEventListener("click",r),o.style.cursor="pointer"}),console.log("ðŸŽ¯ Lightbox: Total images collected:",l.length);function E(e){if(console.log("ðŸŽ¯ Lightbox: Opening project gallery for project:",e),!e)return;const o=(window.projectsData||[]).find(c=>c.id.toString()===e.toString());if(!o){console.error("ðŸŽ¯ Lightbox: Project not found:",e);return}if(l=[],o.acf?.project_gallery&&Array.isArray(o.acf.project_gallery))o.acf.project_gallery.forEach((c,r)=>{l.push({url:c.url,alt:c.alt||o.title.rendered,title:`${o.title.rendered} - Image ${r+1}`,index:r})});else{const c=o.acf_fields||o.acf||{};for(let r=1;r<=6;r++){const n=c[`project_image_${r}`];if(n&&typeof n=="object"&&n.url){let a=n.url;a&&a.includes("renovalinksite.local")&&(a=a.replace("http://renovalinksite.local","")),l.push({url:a,alt:n.alt||o.title.rendered,title:`${o.title.rendered} - Image ${l.length+1}`,index:l.length})}}}if(l.length===0){console.error("ðŸŽ¯ Lightbox: No images found for project:",e);return}console.log("ðŸŽ¯ Lightbox: Project images loaded:",l.length),i=0,b(),t&&(t.classList.remove("opacity-0","invisible"),t.classList.add("opacity-100","visible"),document.body.style.overflow="hidden",console.log("ðŸŽ¯ Lightbox: Project gallery opened successfully"),setTimeout(()=>{t&&t.scrollIntoView({behavior:"instant",block:"center",inline:"center"})},100))}function j(e){if(console.log("ðŸŽ¯ Lightbox: Opening at index:",e),!t||l.length===0){console.error("ðŸŽ¯ Lightbox: Modal or images not available");return}i=e,b(),t.classList.remove("opacity-0","invisible"),t.classList.add("opacity-100","visible"),document.body.style.overflow="hidden",console.log("ðŸŽ¯ Lightbox: Opened successfully"),setTimeout(()=>{t&&t.scrollIntoView({behavior:"instant",block:"center",inline:"center"})},100)}function u(){console.log("ðŸŽ¯ Lightbox: Closing"),t&&(t.classList.add("opacity-0","invisible"),t.classList.remove("opacity-100","visible"),document.body.style.overflow="")}function b(){const e=l[i];e&&m&&p&&v&&(m.src=e.url,m.alt=e.alt,p.textContent=e.title||"",v.textContent=`${i+1} / ${l.length}`,d&&h&&(d.style.display=l.length>1?"block":"none",h.style.display=l.length>1?"block":"none"),console.log("ðŸŽ¯ Lightbox: Content updated for:",e.title))}function g(e){e==="prev"?i=i>0?i-1:l.length-1:i=i<l.length-1?i+1:0,b(),console.log("ðŸŽ¯ Lightbox: Navigated to index:",i)}if(f&&(f.removeEventListener("click",u),f.addEventListener("click",u)),d&&(d.removeEventListener("click",()=>g("prev")),d.addEventListener("click",()=>g("prev"))),h&&(h.removeEventListener("click",()=>g("next")),h.addEventListener("click",()=>g("next"))),t){let e=function(s){s.target===t&&u()};t.removeEventListener("click",e),t.addEventListener("click",e)}function x(e){t&&t.classList.contains("visible")&&(e.key==="Escape"&&u(),e.key==="ArrowLeft"&&g("prev"),e.key==="ArrowRight"&&g("next"))}document.removeEventListener("keydown",x),document.addEventListener("keydown",x),console.log("ðŸŽ¯ Lightbox: Initialization complete")}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",y):y();document.addEventListener("astro:page-load",y);
